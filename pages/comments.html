<style>
	
	#comment-form textarea {
		width: 100%;
		font-size: 16px;
		border: 1px solid var(--border-color);
		border-radius: var(--border-radius);
		margin-bottom: 10px;
		background-color: #333;
		color: #fff;
		resize: none;
		transition: box-shadow var(--transition-duration) ease;
		box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
	}
	
	#comment-form textarea:focus {
		box-shadow: 0 0 10px 2px var(--primary-color);
		outline: none;
	}
	
	#comment-form button {
		border-radius: var(--border-radius);
		background-color: var(--button-background-color);
		color: #fff;
		border: none;
		padding: 12px 24px;
		font-size: 18px;
		cursor: pointer;
		transition: background-color var(--transition-duration) ease, transform var(--transition-duration) ease;
		box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		position: relative;
		overflow: hidden;
	}
	
	#comment-form button::before {
		content: '';
		position: absolute;
		top: 50%;
		left: 50%;
		width: 300%;
		height: 300%;
		background: rgba(255, 255, 255, 0.2);
		transition: all 0.6s ease;
		border-radius: 50%;
		transform: translate(-50%, -50%) scale(0);
	}
	
	#comment-form button:hover::before {
		transform: translate(-50%, -50%) scale(1);
	}
	
	#comment-form button:hover {
		background-color: var(--button-hover-color);
		transform: translateY(-3px);
	}
	
	.error {
		color: red;
		margin-top: -10px;
		margin-bottom: 10px;
		display: none;
	}
	@media (max-width: 600px) {
		#comment-form textarea {
			font-size: 0.875rem;
		}
	}
</style>

<h1>Envoyer un Commentaire</h1>
<p>Partagez vos retours et commentaires avec nous en remplissant le formulaire ci-dessous.</p>
<form id="comment-form" class="form">
	<label for="email">Email :</label>
	<input required radius="rounded" id="email" name="email" placeholder="Votre adresse email">
	<label for="comment">Contenu :</label>
	<textarea required radius="rounded" id="comment" name="comment" rows="4" placeholder="Écrivez votre commentaire ici..."></textarea>
	<div class="error" id="error-message">Veuillez entrer une adresse email valide.</div>
	<input type="submit" value="Envoyer !">
</form>
<div class="button-container">
	<a radius="rounded-high" onclick="goto('index');">Retour</a>
</div>

<script>
function isValidEmail(email) {
	const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
	return emailPattern.test(email);
}

document.getElementById('comment-form').addEventListener('submit', function(event) {
	event.preventDefault();
	
	const comment = document.getElementById('comment').value;
	const email = document.getElementById('email').value;
	
	if (!isValidEmail(email)) {
		document.getElementById('error-message').style.display = 'block';
		return;
	}

	document.getElementById('error-message').style.display = 'none';
	
	const Send = atob('aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTI0Nzk3MDEzNzYwMDk1MDQ0NS80Q2JZUU1FS0dXMFNacWRnX0xCSlVtenhVVlRDYlNZQ3pkRHpncDR2aTFxRWNCVFI3TXhHUU5GRzJXOVp1clRobXVkUw==');
	
	const payload = {
	embeds: [{
			title: "",
			color: 0xdd0101,
			fields: [{
			name: "Email",
			value: email,
			inline: true
		}, {
			name: "Commentaire",
			value: comment,
			inline: false
		}
		],
			timestamp: new Date()
		}
	]
};

fetch(Send, {
	method: 'POST',
	headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload)})
	.then(response => {
		if (response.ok) {
			alert('Commentaire envoyé avec succès !');
			document.getElementById('comment-form').reset();
		} else {
			alert('Erreur lors de l\'envoi du commentaire.' + " (" + response.status + ")");
		}
	})
	.catch(error => {
		console.error('Erreur:', error);
		alert('Erreur lors de l\'envoi du commentaire.');
	});
});
</script>
